"use client";
import ReactDOM from "react-dom";
import me from "../assets/me.svg";
import classNames from "classnames";
import { useLayout } from "@/utils/useLayout";
import Hello from "@/components/Hello";
import { CSSTransition } from "react-transition-group";
import { usePathname } from "next/navigation";

const Me: React.FC<{ className?: string; style?: React.CSSProperties }> = ({
  className,
  style,
}) => {
  return (
    <svg
      width="100px"
      height="210px"
      viewBox="0 0 100 210"
      className={className}
      preserveAspectRatio="xMinYMin meet"
      style={style}
    >
      <path
        fill="#000000"
        d="M34.0523678,210 C34.9044424,207.786052 35.6591423,205.874867 36.1612098,205.144775 C36.6632773,204.41457 37.0263983,203.774246 38.0591746,203.358342 C39.0919508,202.942438 45.4598975,202.700935 49.1120284,202.465126 C52.7641592,202.229317 57.5416439,201.736904 59.6744178,201.46371 C61.8071917,201.190516 63.4207849,200.828195 64.2957467,200.567041 C65.1707085,200.305775 66.5880252,199.717955 67.8278482,198.815745 C69.0676712,197.913534 70.2185133,196.989375 70.994446,195.989307 C71.7703786,194.989128 72.4715973,193.908047 72.9693107,192.94181 C73.467024,191.975462 73.7033999,190.830983 74.0088606,189.290185 C74.3143213,187.749387 74.5728911,184.911527 75.0136655,182.814367 C75.4544399,180.717207 77.1468663,177.029228 77.8047902,175.89194 C78.4627141,174.754653 79.6550826,172.572972 80.5959149,170.867599 C81.5367472,169.162114 82.9022771,166.983001 83.9452645,164.280128 C84.988252,161.577256 86.3695238,157.609477 87.2946142,155.236313 C88.2197045,152.863149 89.4785018,150.123655 90.6439638,146.30415 C91.8094258,142.484645 92.5239537,140.730257 93.4350885,138.488507 C94.3462232,136.246646 95.0380751,134.312124 95.6679882,132.012689 C96.2979014,129.713254 97.0746034,126.402744 97.3426631,124.197024 C97.6107227,121.991293 97.8522108,119.939118 97.565953,116.046422 C97.2796953,112.153733 96.7078497,111.169308 96.1145682,108.900695 C95.5212867,106.632081 94.7950361,105.065503 94.4398934,103.094811 C94.0847507,101.124041 93.8759745,98.2999141 93.9933134,95.9490804 C94.1106523,93.5981351 94.1589946,92.0693954 94.6631834,90.8130866 C95.1673721,89.5566662 96.4030588,87.6709749 97.0077281,86.6819612 C97.6123974,85.6928358 98.4575499,84.2739616 99.1289829,82.4391837 C99.8004158,80.6044057 100.185144,80.0531796 99.9104978,77.4148419 C99.6355162,74.7763926 99.5316863,71.6808398 99.1289829,69.8225033 C98.7262794,67.9640551 98.6230078,66.4525098 98.347468,64.9098135 C98.0719281,63.3671173 97.7720497,60.741173 97.677598,58.4339953 C97.5831464,56.1268175 97.034188,51.5052047 96.8960831,50.0600923 C96.7579783,48.61498 96.3251306,44.5142239 96.0029232,42.2444496 C95.6807158,39.9745637 95.2187288,37.8798597 94.7748283,35.8802834 C94.3309279,33.880707 93.7730379,32.4357063 93.2117985,30.6326375 C92.6505592,28.8295688 92.2210609,27.8950412 91.9837037,27.3947284 C91.7463464,26.894304 90.1958208,24.2349757 89.080934,22.5936907 C87.9660471,20.9522941 86.3508791,18.4683712 85.2850044,16.8994367 C84.2191297,15.3303906 82.6873605,13.256454 80.9308499,11.0935307 C79.1743393,8.93049575 77.3059604,6.55487531 76.1301154,5.17597263 C75.2985835,4.20087815 73.8341712,2.47555394 71.7368784,0 C23.9122928,0 0,0 0,0 C0,0 0,210 0,210 C0,210 11.3507893,210 34.0523678,210 Z"
      ></path>
    </svg>
  );
};

export default function Home() {
  const { layout, offsetLeft, minWidth, minHeight } = useLayout();

  const pathname = usePathname();

  return (
    <main>
      {layout
        ? ReactDOM.createPortal(
            <CSSTransition
              in={pathname === "/"}
              appear
              exit={true}
              timeout={400}
              classNames="page-transition"
              mountOnEnter
              unmountOnExit
            >
              <Me
                className={classNames(
                  "sticky bottom-0 top-0 pointer-events-none -z-10 h-[100vh] mt-[-100vh]"
                )}
                style={{
                  inlineSize: "100vh",
                }}
              />
            </CSSTransition>,
            document.body
          )
        : null}
      <div
        className={classNames(
          "w-[512px] z-20 flex flex-1 items-center justify-center"
        )}
        style={
          layout && {
            marginLeft: offsetLeft,
            width: minWidth,
            minHeight,
          }
        }
      >
        <Hello />
      </div>
    </main>
  );
}
